# Kotlib XCFramework

```shell
brew install --cask kotlin-native

./build-xcframework.sh

swift run --package-path Swift
```


--- The following is generated by Claude Sonnet 4 ---


## Overview
Your Kotlin code has been successfully compiled into an XCFramework for iOS and macOS! 

## Generated Files
- **XCFramework**: `build/Kotlib.xcframework`
- **Source**: `src/commonMain/kotlin/Kotlib.kt`

## Supported Platforms & Architectures
- **iOS Device**: arm64
- **iOS Simulator**: x86_64 and arm64 (universal binary)
- **macOS**: x86_64 and arm64 (universal binary)

## Available Functions & Classes
Your XCFramework includes the following Kotlin functions and classes that can be called from iOS/macOS:

### Functions:
```kotlin
fun greet(): String                    // Returns a greeting message
fun calculate(a: Int, b: Int): Int     // Calculates sum of two integers
```

### Classes:
```kotlin
data class Person(val name: String, val age: Int) {
    fun getDescription(): String       // Returns formatted description
}
```

### Swift Interface Features:
- ✅ **Swift-friendly naming**: Functions use `swift_name` attributes for natural Swift syntax
- ✅ **Documentation**: KDoc comments are exported to Swift/Objective-C headers  
- ✅ **Type mapping**: Kotlin types are properly mapped to Swift types
- ✅ **Data classes**: Kotlin data classes work seamlessly with Swift

## Using in iOS/macOS Projects

### Option 1: Swift Package Manager (Recommended)

1. **For local development**: 
   - In Xcode, go to `File > Add Package Dependencies`
   - Click "Add Local..." and select the `build` folder
   - The package will be added with the XCFramework automatically linked

2. **For distribution via Git**:
   - Commit the `build/` folder to your Git repository
   - In Xcode, go to `File > Add Package Dependencies`
   - Enter your repository URL
   - Xcode will automatically resolve the XCFramework

### Option 2: Manual XCFramework Integration

1. Drag and drop `build/Kotlib.xcframework` into your Xcode project
2. Make sure to select "Copy items if needed"
3. Add to target dependencies

### Usage in Swift Code (iOS/macOS)

```swift
import Kotlib

// iOS Example
class ViewController: UIViewController {
    override func viewDidLoad() {
        super.viewDidLoad()
        
        // Call Kotlin functions with Swift-friendly syntax
        let greeting = KotlibKt.greet()
        print(greeting)  // Prints: "Hello from Kotlin Multiplatform!"
        
        let result = KotlibKt.calculate(a: 5, b: 3)
        print("5 + 3 = \(result)")  // Prints: "5 + 3 = 8"
        
        // Use Kotlin data classes
        let person = KotlinPerson(name: "Alice", age: 30)
        print(person.getDescription())  // Prints: "Alice is 30 years old"
        print("Name: \(person.name), Age: \(person.age)")
    }
}

// macOS Example
class ViewController: NSViewController {
    override func viewDidLoad() {
        super.viewDidLoad()
        
        // Same Swift-friendly API works on macOS
        let greeting = KotlibKt.greet()
        print(greeting)
        
        let person = KotlinPerson(name: "Bob", age: 25)
        print(person.getDescription())
    }
}
```

### Usage in Objective-C Code

```swift
import Kotlib

class ViewController: UIViewController {
    override func viewDidLoad() {
        super.viewDidLoad()
        
        // Call Kotlin functions
        let greeting = KotlibKt.greet()
        print(greeting)  // Prints: "Hello from Kotlin Multiplatform!"
        
        let result = KotlibKt.calculate(a: 5, b: 3)
        print("5 + 3 = \(result)")  // Prints: "5 + 3 = 8"
    }
}
```

### Usage in Objective-C Code (iOS/macOS)

```objc
#import <Kotlib/Kotlib.h>

// iOS Example
@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    
    // Call Kotlin functions (with full documentation in headers)
    NSString *greeting = [KotlinKotlibKt greet];
    NSLog(@"%@", greeting);  // Prints: "Hello from Kotlin Multiplatform!"
    
    int32_t result = [KotlinKotlibKt calculateA:5 b:3];
    NSLog(@"5 + 3 = %d", result);  // Prints: "5 + 3 = 8"
    
    // Use Kotlin data classes
    KotlinPerson *person = [[KotlinPerson alloc] initWithName:@"Alice" age:30];
    NSLog(@"%@", [person getDescription]);  // Prints: "Alice is 30 years old"
}

@end

// macOS Example  
@implementation NSViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    
    // Same API works on macOS
    NSString *greeting = [KotlinKotlibKt greet];
    NSLog(@"%@", greeting);
    
    KotlinPerson *person = [[KotlinPerson alloc] initWithName:@"Bob" age:25];
    NSLog(@"%@", [person getDescription]);
}

@end
```

## Building
To rebuild the XCFramework after making changes to your Kotlin code:

```bash
./build-xcframework.sh
```

The script will automatically download the Kotlin/Native compiler if needed.

## Project Structure
```
Kotlib/
├── src/commonMain/kotlin/Kotlib.kt  # Your Kotlin source code
├── build/
│   ├── Kotlib.xcframework/          # Generated XCFramework
│   └── Package.swift                # Swift Package Manager manifest
├── build-xcframework.sh             # Build script
├── README.md                        # This file
└── .gitignore                       # Git ignore rules
```

## Distribution

### Local Development
The `build/` folder contains everything needed for Swift Package Manager integration:
- `Kotlib.xcframework` - The compiled framework
- `Package.swift` - Swift Package Manager manifest

### Git Repository Distribution
1. Commit the `build/` folder to your Git repository
2. Tag your releases (e.g., `v1.0.0`) 
3. Other projects can add your package via Git URL in Xcode

### Manual Distribution
Share just the `build/Kotlib.xcframework` folder for manual integration into iOS or macOS projects.

## Notes
- The XCFramework supports iOS devices, iOS simulators, and macOS (both Intel and Apple Silicon)
- Bundle ID is explicitly set to `com.kotlib.framework` to avoid compiler warnings
- The framework is built in debug mode for development
